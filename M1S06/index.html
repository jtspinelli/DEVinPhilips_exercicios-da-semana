<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>M1S06 - Exercícios</title>
    <link rel="stylesheet" href="../M1S03/styles/base.css">
    <link rel="stylesheet" href="../M1S03/styles/styles.css">
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/11.6.0/styles/atom-one-dark.min.css">
    <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/11.6.0/highlight.min.js"></script>
    <script src="./scripts/ex1.js" defer type="module"></script>
    <script src="./scripts/ex2.js" defer type="module"></script>
    <script src="./scripts/ex3.js" defer type="module"></script>
    <script src="./scripts/ex4.js" defer type="module"></script>
    <script src="./scripts/ex5.js" defer type="module"></script>
    <script src="./scripts/ex6.js" defer type="module"></script>
    <script src="./scripts/ex7.js" defer type="module"></script>
    <script src="./scripts/ex8.js" defer type="module"></script>
    <script src="./titles.js" defer></script>
    <script src="./run.js" defer></script>
    <script src="./showCode.js" defer type="module"></script>
</head>
<body>
    <header>
        <a href="../index.html"><button>voltar</button></a>
        <div>
            <h2>Módulo 1 - <span>Exercícios da Semana 06</span></h2> 
        </div>        
    </header>

    <main>

        <ul id="m1s06">
            <li id="ex1">
                <div class="exercise-title">Ex 1 - Sleep</div>
            
                <div class="description hidden">
                    <p>Crie uma função chamada <strong>sleep</strong>, que recebe como argumento um  valor qualquer.</p>

                    <p>Quando chamada, essa função precisa retornar, após 3 segundos (setTimeout), uma Promise resolvida com o valor que foi passado como argumento.</p>
                    
                    <p>Ex.:</p>

                    <pre>
                        <span class="linenumbers">
                            <i></i>
                            <i></i>
                            <i></i>
                            <i></i>
                            <i></i>
                        </span>

                        <code>function sleep ( valor ) {<br>    return new Promise ( (res, rej) => {<br>        setTimeout( ... );<br>    })<br>}</code>                        
                    </pre>                   

                    <p>Chame esta função e confirme o funcionamento dela (lembre-se que o valor do tempo de espera é aproximado!)</p>

                    <hr>

                    <p>Utilize o campo abaixo para enviar dados para a função <strong>Sleep</strong>:</p>

                    <div class="input-container">
                        <input id="ex1-input" type="text">
                    </div>

                    <div class="exercise-buttons">
                        <button class="code-button">ver código</button>
                        <button class="run-button">Rodar exercício</button>
                    </div>
                </div>
            </li>

            <li id="ex2">
                <div class="exercise-title">Ex 2 - Timer</div>
            
                <div class="description hidden">
                    <p>Utilizando o <strong>setInterval</strong>, crie uma função que mostre o horário atual e atualize automaticamente a cada 2 segundos.</p>

                    <p>O horário deve ser mostrado no formato <strong>HH:MM:SS</strong>.</p>

                    <hr>

                    <p style="text-align: center;">HORA AGORA<span id="horario-obs"> (clique em rodar exercício para ver o horário no campo abaixo)</span>:</p>

                    <p class="horario">00:00:00</p>

                    <p id="reset" class="hidden" style="text-align: center; overflow: hidden;">O relógio desligará automaticamente após 5 minutos.</p>

                    <div class="exercise-buttons">
                        <button class="code-button">ver código</button>
                        <button class="run-button">Rodar exercício</button>
                    </div>
                </div>  
            </li>

            <li id="ex3">
                <div class="exercise-title">Ex 3 - Promise (all)</div>
            
                <div class="description hidden">
                    <p>
                        Para aprovação de um empréstimo, um banco usa as funções descritas abaixo:<br>
                        - Aprovação do cadastro pessoal<br>
                        - Aprovação do valor solicitado<br>
                        Ambas retornam uma promise para fazer o  processamento em segundo plano (no código, este processamento está simulado).
                    </p>

                    <p>Para o cliente instanciado no código abaixo, foram executadas ambas as funções e criadas variáveis para armazenar este retorno.</p>

                    <p>Usando o método '<strong>Promise.all()</strong>', recupere o resultado de ambas as promises e imprima 'APROVADO' ou 'REPROVADO', conforme os resultados das promises forem resolvidos ou rejeitados.</p>
                
                    <p>Por fim, imprima a frase 'Fim do Processamento', qualquer que seja o resultado (resolve ou reject) das promises ('finally').</p>

                    <pre>
                        <span class="linenumbers">
                            <i></i> <i></i> <i></i> <i></i> <i></i> <i></i> <i></i> <i></i> <i></i> <i></i>
                            <i></i> <i></i> <i></i> <i></i> <i></i> <i></i> <i></i> <i></i> <i></i> <i></i>
                            <i></i> <i></i> <i></i>
                        </span>

                        <code>function aprovarDadosCadastrais( cliente ) {<br>    return new Promise( (resolve, reject) => {<br>        if (cliente.cpf === 11111111111)<br>            resolve(true);<br>      else<br>            reject(false);<br>  });<br>}<br><br>function aprovarValorSolicitado( cliente, valor ) {<br>    return new Promise( (resolve, reject) => {<br>       if (cliente.margem >= valor)<br>            resolve(true);<br>       else<br>            reject(false);<br>     });<br>}<br><br>const cliente = { cpf: 11111111111, nome: 'Calleri', margem: 1000.0 };<br>const aprovacaoCadastro = aprovarDadosCadastrais(cliente);</br>const aprovacaoValor = aprovarValorSolicitado(cliente, 300.0);<br><br>// continue com o tratamento dos resultados de ambas as promises...</code>
                    </pre> 

                    <div class="exercise-buttons">
                        <button class="code-button">ver código</button>
                        <button class="run-button">Rodar exercício</button>
                    </div>
                </div>
            </li>
            
            <li id="ex4">
                <div class="exercise-title">Ex 4 - Promise (race)</div>
            
                <div class="description hidden">
                    <p>O sistema de uma empresa, após efetuar a venda, chama funções remotas de duas empresas de entrega dos pedidos, e aquela que responder mais rápido nossa requisição fica responsável pela entrega.</p>

                    <p>O retorno das chamadas foram adicionados nas constantes abaixo: '<em>retornoEmpresa1</em>' e '<em>retornoEmpresa2</em>'.</p>
                
                    <p>Usando '<strong>Promise.race()</strong>', recupere o valor da promise da empresa vencedora e imprima o resultado.</p>
                
                    <pre>
                        <span class="linenumbers">
                            <i></i> <i></i> <i></i> <i></i> <i></i> <i></i>
                        </span>

                        <code>const retornoEmpresa1 = new Promise( (resolve, reject) =><br>    setTimeout(resolve, 5000, "Empresa 1") ); // 5 segundos<br>const retornoEmpresa2 = new Promise( (resolve, reject) =><br>    setTimeout(resolve, 3000, "Empresa 2") ); // 3 segundos<br><br>// ... continue daqui ....</code>
                    </pre>

                    <div class="exercise-buttons">
                        <button class="code-button">ver código</button>
                        <button class="run-button">Rodar exercício</button>
                    </div>
                </div>
            </li>

            <li id="ex5">
                <div class="exercise-title">Ex 5 - async-await</div>
            
                <div class="description hidden">
                    <p>Altere as funções abaixo usando <strong>async-await</strong> para retorno e tratamento de promises:</p>

                    <pre>
                        <span class="linenumbers">
                            <i></i> <i></i> <i></i> <i></i> <i></i> <i></i> <i></i>
                            <i></i> <i></i> <i></i> <i></i> <i></i> <i></i>
                        </span>

                        <code>function obterClienteNoBancoDeDados(idCliente) {<br>    return new Promise( (resolve, reject) => {<br>        const cliente = { nome: 'bruce wayne', id: idCliente };<br>        resolve(cliente);<br>    });<br>}<br><br>function processar() {<br>     obterClienteNoBancoDeDados(7)<br>        .then(cliente => console.log(cliente));<br>}<br><br>processar();</code>
                    </pre>

                    <div class="exercise-buttons">
                        <button class="code-button">ver código</button>
                        <button class="run-button">Rodar exercício</button>
                    </div>
                </div>
            </li>

            <li id="ex6">
                <div class="exercise-title">Ex 6 - Fetch</div>
            
                <div class="description hidden">
                    <p>
                        Existe uma API pública que retorna a idade média das pessoas que possuem o nome passado como parâmetro.<br>
                        Para o cálculo, é usada uma base de dados interna deles, que pode ser subdividida pelo país passado também como parâmetro.
                    </p>

                    <p>
                        Faça uma chamada para esta API e descubra a idade média das pessoas com seu nome aqui no Brasil, conforme exemplo abaixo.<br>
                        Imprima o nome e a idade média retornados.<br>
                        A idade está representada na propriedade '<em>age</em>' do retorno da API:
                    </p>

                    <div class="exercise-buttons">
                        <button class="code-button">ver código</button>
                        <button class="run-button">Rodar exercício</button>
                    </div>
                </div>
            </li>

            <li id="ex7">
                <div class="exercise-title">Ex 7 - Fetch</div>
            
                <div class="description hidden">
                    <p>
                        Quanto será que está a preço do Bitcoin hoje???<br>
                        Vamos descobrir!
                    </p>

                    <p>
                        Obtenha os dados nessa API : https://api.coincap.io/v2/assets/bitcoin, imprima a frase:<br>
                        '<em>O preço do Bitcoin - &lt;simbolo do bitcoin> em dólares hoje é $ &lt;preço do bitcoin></em>`.
                    </p>

                    <p>
                        Dicas:<br>
                        a) Repare que o retorno desta API encapsula os dados dentro de um objeto '<em>data</em>'.<br>
                        b) Use as propriedades '_symbol_' e '_priceUsd_' do retorno para preencher os valores na frase.
                    </p>

                    <div class="exercise-buttons">
                        <button class="code-button">ver código</button>
                        <button class="run-button">Rodar exercício</button>
                    </div>
                </div>
            </li>

            <li id="ex8">
                <div class="exercise-title">Ex 8 - Fetch</div>
            
                <div class="description hidden">
                    <p>
                        Existe a API <strong>'Random User Generator'</strong>, que gera usuários fakes para fins de testes e protótipos.<br>
                        Vamos usá-la para praticar e consumir APIs com promises.
                    </p>

                    <p>
                        A URL da API é esta abaixo, onde o argumento 'results' representa a quantidade de resultados que queremos retornar:<br>
                        <a href="https://randomuser.me/api/?results=4" target="_blank" rel="noopener noreferrer">https://randomuser.me/api/?results=4</a>                        
                    </p>

                    <p>Verifique a documentação e exemplo de retorno em:</p>

                    <p class="blockquote"> 
                        <a href="https://randomuser.me/documentation#howto" target="_blank">                          
                            <span style="position: relative;">
                                <img src="https://randomuser.me/favicon.ico" alt="">
                            </span>
                            <span class="text">
                                Random User Generator | Documentation
                            </span>                          
                        </a>
                    </p>

                    <p>ou faça uma chamada para a API (no navegador ou console) para verificar um exemplo de resultado.</p>
                
                    <p>
                        Com base no json de retorno, monte uma página web com layout semelhante ao <strong>anexo</strong>, contendo dados de usuários de sistema com
                        foto, título, nome, sobrenome, e-mail e endereço completo.<br>
                        O layout (css) é livre, desde que apresente as informações solicitadas.
                    </p>

                    <p>
                        <strong>Dicas</strong>:<br>
                        a) Perceba que os resultados ficam dentro do campo <em>'results'</em> do json de retorno;<br>
                        b) Para a foto, use a versão grande do campo <em>'picture'</em>_: 'large' (grande);<br>
                        c) Para o nome, use os campos de <em>'name'</em>: 'title' (título), 'first' (nome), 'last' (sobrenome);<br>
                        d) Para o endereço, use os campos de <em>'location'</em>: 'street' (rua), 'city' (cidade), 'state' (estado), 'country' (país);<br>
                        e) Como é uma chamada remota para o serviço, o resultado pode demorar alguns segundos para retornar.
                    </p>

                    <p class="ultimo-p-enunciado">
                        <strong>Extra</strong>:
                        Adicione um campo para que o usuário selecione a quantidade de itens que deseja exibir.
                    </p>

                    <ul id="ex8-userlist"></ul>

                    <hr>

                    <p>Selecione abaixo a quantidade de usuários que deseja mostrar e clique em "Rodar exercício".</p>

                    <input class="slider" type="range" id="users-amount-select" min="4" max="20" value="10">
                    <p id="slider-label">Valor: <span id="users-amount">10</span></p>


                    <div class="exercise-buttons">
                        <button class="code-button">ver código</button>
                        <button class="run-button">Rodar exercício</button>
                    </div>
                </div>
            </li>
        </ul>

        <div class="code-container hidden-code">
            <div id="code-container-frame">
                <div class="header">
                    <h1 id="code-title">Código do exercício #n</h1>
                    <div id="code-close"> x </div>
                </div>
                
                <pre>
                    <code id="code"></code>
                </pre>
            </div>
        </div>
    </main>
</body>
</html>